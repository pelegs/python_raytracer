import numpy as np
from libs.classes_cy import *
import cv2


screen = Screen(resolution=(320, 240))
camera = Camera(screen=screen)
camera.translate(2*Z_)

cube_points = np.array(
    [
        [-1.34191, 1.0, -4.446395],
        [1.34191, 1.0, -3.553605],
        [0.44639, 1.0, -5.341913],
        [1.34191, 1.0, -3.553605],
        [-0.44639, -1.0, -2.658087],
        [1.34191, -1.0, -3.553605],
        [-0.44639, 1.0, -2.658087],
        [-1.34191, -1.0, -4.446395],
        [-0.44639, -1.0, -2.658087],
        [0.44639, -1.0, -5.341913],
        [-0.44639, -1.0, -2.658087],
        [-1.34191, -1.0, -4.446395],
        [0.44639, 1.0, -5.341913],
        [1.34191, -1.0, -3.553605],
        [0.44639, -1.0, -5.341913],
        [-1.34191, 1.0, -4.446395],
        [0.44639, -1.0, -5.341913],
        [-1.34191, -1.0, -4.446395],
        [-1.34191, 1.0, -4.446395],
        [-0.44639, 1.0, -2.658087],
        [1.34191, 1.0, -3.553605],
        [1.34191, 1.0, -3.553605],
        [-0.44639, 1.0, -2.658087],
        [-0.44639, -1.0, -2.658087],
        [-0.44639, 1.0, -2.658087],
        [-1.34191, 1.0, -4.446395],
        [-1.34191, -1.0, -4.446395],
        [0.44639, -1.0, -5.341913],
        [1.34191, -1.0, -3.553605],
        [-0.44639, -1.0, -2.658087],
        [0.44639, 1.0, -5.341913],
        [1.34191, 1.0, -3.553605],
        [1.34191, -1.0, -3.553605],
        [-1.34191, 1.0, -4.446395],
        [0.44639, 1.0, -5.341913],
        [0.44639, -1.0, -5.341913],
    ]
)
triangles = [
    Triangle(cube_points[n:n+3], id=i+1)
    for i, n in enumerate(np.arange(0, cube_points.shape[0], 3))
]

camera.project_triangles(triangles)
camera.projected_blur(n=10)
cv2.imwrite(
    "pics/projection_test1.png",
    np.swapaxes(camera.screen.projected, 0, 1),
)
